'use client';

import { useEffect, useState } from 'react';

const Pattern1 = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" viewBox="0 0 6 6" fill="none">
    <mask id="path-1-inside-1_2716_3319" fill="white">
      <path d="M5.1189 2.8389C5.1189 4.09815 4.09809 5.11896 2.83884 5.11896C1.57959 5.11895 0.558779 4.09815 0.558779 2.8389C0.558779 1.57965 1.57959 0.558838 2.83884 0.558838C4.09809 0.558838 5.1189 1.57965 5.1189 2.8389ZM5.67773 2.8389C5.67773 1.2667 4.40358 -5.56948e-08 2.83884 -1.24092e-07C1.27409 -1.92489e-07 -5.91278e-05 1.27415 -5.91278e-05 2.8389C-5.91278e-05 4.40364 1.27409 5.67779 2.83884 5.67779C4.40358 5.67779 5.67773 4.40364 5.67773 2.8389Z"/>
    </mask>
    <path d="M5.1189 2.8389C5.1189 4.09815 4.09809 5.11896 2.83884 5.11896C1.57959 5.11895 0.558779 4.09815 0.558779 2.8389C0.558779 1.57965 1.57959 0.558838 2.83884 0.558838C4.09809 0.558838 5.1189 1.57965 5.1189 2.8389ZM5.67773 2.8389C5.67773 1.2667 4.40358 -5.56948e-08 2.83884 -1.24092e-07C1.27409 -1.92489e-07 -5.91278e-05 1.27415 -5.91278e-05 2.8389C-5.91278e-05 4.40364 1.27409 5.67779 2.83884 5.67779C4.40358 5.67779 5.67773 4.40364 5.67773 2.8389Z" fill="#D2D2D2"/>
    <path d="M5.1189 2.8389L4.1189 2.8389C4.1189 3.54586 3.5458 4.11896 2.83884 4.11896V5.11896V6.11896C4.65037 6.11896 6.1189 4.65043 6.1189 2.8389L5.1189 2.8389ZM2.83884 5.11896V4.11896C2.13187 4.11895 1.55878 3.54586 1.55878 2.8389L0.558779 2.8389L-0.441221 2.8389C-0.441221 4.65043 1.0273 6.11895 2.83884 6.11896V5.11896ZM0.558779 2.8389L1.55878 2.8389C1.55878 2.13193 2.13187 1.55884 2.83884 1.55884V0.558838V-0.441162C1.0273 -0.441162 -0.441221 1.02736 -0.441221 2.8389L0.558779 2.8389ZM2.83884 0.558838V1.55884C3.5458 1.55884 4.1189 2.13193 4.1189 2.8389L5.1189 2.8389L6.1189 2.8389C6.1189 1.02736 4.65037 -0.441162 2.83884 -0.441162V0.558838ZM5.67773 2.8389L6.67773 2.8389C6.67773 0.712705 4.95416 -1 2.83884 -1V-1.24092e-07V1C3.85301 1 4.67773 1.82069 4.67773 2.8389L5.67773 2.8389ZM2.83884 -1.24092e-07V-1C0.721806 -1 -1.00006 0.721865 -1.00006 2.8389L-5.91278e-05 2.8389L0.999941 2.8389C0.999941 1.82643 1.82638 1 2.83884 1V-1.24092e-07ZM-5.91278e-05 2.8389L-1.00006 2.8389C-1.00006 4.95593 0.721806 6.67779 2.83884 6.67779V5.67779V4.67779C1.82638 4.67779 0.999941 3.85136 0.999941 2.8389L-5.91278e-05 2.8389ZM2.83884 5.67779V6.67779C4.95587 6.67779 6.67773 4.95593 6.67773 2.8389L5.67773 2.8389L4.67773 2.8389C4.67773 3.85136 3.8513 4.67779 2.83884 4.67779V5.67779Z" fill="#D2D2D2" mask="url(#path-1-inside-1_2716_3319)"/>
    <path d="M3.56689 2.72754C3.56689 3.13049 3.24032 3.45785 2.8374 3.45801C2.43435 3.45801 2.10693 3.13059 2.10693 2.72754C2.10709 2.32462 2.43445 1.99805 2.8374 1.99805C3.24022 1.9982 3.56674 2.32472 3.56689 2.72754Z" fill="#D2D2D2" stroke="#D2D2D2"/>
  </svg>
);

const Pattern2 = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="5" height="6" viewBox="0 0 5 6" fill="none">
    <path d="M2.42383 0L2.42383 5.08818" stroke="#D2D2D2" strokeWidth="0.75" strokeMiterlimit="10"/>
    <path d="M4.85498 2.54883L0.000161513 2.54883" stroke="#D2D2D2" strokeWidth="0.75" strokeMiterlimit="10"/>
  </svg>
);

const Pattern3 = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" viewBox="0 0 6 6" fill="none">
    <mask id="path-1-inside-1_2716_3425" fill="white">
      <path d="M2.98096 5.60867L2.98096 0L2.39834 -2.5467e-08L2.39834 5.60867L2.98096 5.60867Z"/>
    </mask>
    <path d="M2.98096 5.60867L2.98096 0L2.39834 -2.5467e-08L2.39834 5.60867L2.98096 5.60867Z" fill="#D2D2D2"/>
    <path d="M2.98096 0L3.98096 4.37114e-08V-1L2.98096 -1V0ZM2.98096 5.60867V6.60867L3.98096 6.60867V5.60867L2.98096 5.60867ZM2.39834 5.60867L1.39834 5.60867V6.60867L2.39834 6.60867V5.60867ZM2.39834 -2.5467e-08V-1L1.39834 -1V-6.91784e-08L2.39834 -2.5467e-08ZM2.98096 0L1.98096 -4.37114e-08L1.98096 5.60867L2.98096 5.60867L3.98096 5.60867L3.98096 4.37114e-08L2.98096 0ZM2.98096 5.60867V4.60867L2.39834 4.60867V5.60867V6.60867L2.98096 6.60867V5.60867ZM2.39834 5.60867L3.39834 5.60867L3.39834 1.82444e-08L2.39834 -2.5467e-08L1.39834 -6.91784e-08L1.39834 5.60867L2.39834 5.60867ZM2.39834 -2.5467e-08V1L2.98096 1V0V-1L2.39834 -1V-2.5467e-08Z" fill="#D2D2D2" mask="url(#path-1-inside-1_2716_3425)"/>
    <mask id="path-3-inside-2_2716_3425" fill="white">
      <path d="M5.35938 3.07432V2.51758L-0.000172138 2.51758V3.07432L5.35938 3.07432Z"/>
    </mask>
    <path d="M5.35938 3.07432V2.51758L-0.000172138 2.51758V3.07432L5.35938 3.07432Z" fill="#D2D2D2"/>
    <path d="M5.35938 2.51758L6.35938 2.51758V1.51758L5.35938 1.51758V2.51758ZM5.35938 3.07432V4.07432L6.35938 4.07432V3.07432L5.35938 3.07432ZM-0.000172138 3.07432L-1.00017 3.07432V4.07432L-0.000172138 4.07432V3.07432ZM-0.000172138 2.51758V1.51758L-1.00017 1.51758V2.51758L-0.000172138 2.51758ZM5.35938 2.51758L4.35938 2.51758V3.07432L5.35938 3.07432L6.35938 3.07432V2.51758L5.35938 2.51758ZM5.35938 3.07432V2.07432L-0.000172138 2.07432V3.07432V4.07432L5.35938 4.07432V3.07432ZM-0.000172138 3.07432L0.999828 3.07432V2.51758L-0.000172138 2.51758L-1.00017 2.51758V3.07432L-0.000172138 3.07432ZM-0.000172138 2.51758V3.51758L5.35938 3.51758V2.51758V1.51758L-0.000172138 1.51758V2.51758Z" fill="#D2D2D2" mask="url(#path-3-inside-2_2716_3425)"/>
    <mask id="path-5-inside-3_2716_3425" fill="white">
      <path d="M4.82803 4.54287L0.951172 0.666016L0.548451 1.06874L4.42531 4.94559L4.82803 4.54287Z"/>
    </mask>
    <path d="M4.82803 4.54287L0.951172 0.666016L0.548451 1.06874L4.42531 4.94559L4.82803 4.54287Z" fill="#D2D2D2"/>
    <path d="M0.951172 0.666016L1.65828 -0.0410911L0.951172 -0.748198L0.244065 -0.0410912L0.951172 0.666016ZM4.82803 4.54287L5.53513 5.24998L6.24224 4.54287L5.53513 3.83577L4.82803 4.54287ZM4.42531 4.94559L3.7182 5.6527L4.42531 6.35981L5.13241 5.6527L4.42531 4.94559ZM0.548451 1.06874L-0.158655 0.361629L-0.865762 1.06874L-0.158656 1.77584L0.548451 1.06874ZM0.951172 0.666016L0.244065 1.37312L4.12092 5.24998L4.82803 4.54287L5.53513 3.83577L1.65828 -0.0410911L0.951172 0.666016ZM4.82803 4.54287L4.12092 3.83577L3.7182 4.23849L4.42531 4.94559L5.13241 5.6527L5.53513 5.24998L4.82803 4.54287ZM4.42531 4.94559L5.13241 4.23849L1.25556 0.361629L0.548451 1.06874L-0.158656 1.77584L3.7182 5.6527L4.42531 4.94559ZM0.548451 1.06874L1.25556 1.77584L1.65828 1.37312L0.951172 0.666016L0.244065 -0.0410912L-0.158655 0.361629L0.548451 1.06874Z" fill="#D2D2D2" mask="url(#path-5-inside-3_2716_3425)"/>
    <mask id="path-7-inside-4_2716_3425" fill="white">
      <path d="M4.82508 1.06874L4.42236 0.666016L0.545522 4.54286L0.948243 4.94558L4.82508 1.06874Z"/>
    </mask>
    <path d="M4.82508 1.06874L4.42236 0.666016L0.545522 4.54286L0.948243 4.94558L4.82508 1.06874Z" fill="#D2D2D2"/>
    <path d="M4.42236 0.666016L5.12947 -0.0410911L4.42236 -0.748198L3.71526 -0.0410912L4.42236 0.666016ZM4.82508 1.06874L5.53219 1.77584L6.2393 1.06874L5.53219 0.361629L4.82508 1.06874ZM0.948243 4.94558L0.241136 5.65268L0.948243 6.35979L1.65535 5.65268L0.948243 4.94558ZM0.545522 4.54286L-0.161584 3.83575L-0.868691 4.54286L-0.161585 5.24996L0.545522 4.54286ZM4.42236 0.666016L3.71526 1.37312L4.11798 1.77584L4.82508 1.06874L5.53219 0.361629L5.12947 -0.0410911L4.42236 0.666016ZM4.82508 1.06874L4.11798 0.361629L0.241136 4.23847L0.948243 4.94558L1.65535 5.65268L5.53219 1.77584L4.82508 1.06874ZM0.948243 4.94558L1.65535 4.23847L1.25263 3.83575L0.545522 4.54286L-0.161585 5.24996L0.241136 5.65268L0.948243 4.94558ZM0.545522 4.54286L1.25263 5.24996L5.12947 1.37312L4.42236 0.666016L3.71526 -0.0410912L-0.161584 3.83575L0.545522 4.54286Z" fill="#D2D2D2" mask="url(#path-7-inside-4_2716_3425)"/>
  </svg>
);

const Pattern4 = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="5" height="5" viewBox="0 0 5 5" fill="none">
    <path d="M0.265303 0.265625L4.24414 4.24446" stroke="#D2D2D2" strokeWidth="0.75" strokeMiterlimit="10"/>
    <path d="M4.24414 0.451172L0.265303 4.43001" stroke="#D2D2D2" strokeWidth="0.75" strokeMiterlimit="10"/>
  </svg>
);

export default function BackgroundPattern() {
  const [patterns, setPatterns] = useState<React.ReactElement[]>([]);

  useEffect(() => {
    const { innerWidth: width, innerHeight: height } = window;
    const isMobile = width <= 390;

    const gap = isMobile ? 30 : 160;
    const paddingTop = 32; // pt-8
    const paddingX = isMobile ? 30 : 48; // px-12 (â‰ˆ48px)

    const rows = Math.ceil(height / gap);
    const cols = Math.ceil(width / gap);

    const patternComponents = [Pattern1, Pattern2, Pattern3, Pattern4];

    const generatedPatterns: React.ReactElement[] = [];

    for (let r = 0; r < rows; r++) {
      for (let c = 0; c < cols; c++) {
        const Pattern = patternComponents[(r + c) % patternComponents.length];
        generatedPatterns.push(
          <div
            key={`${r}-${c}`}
            style={{
              position: 'absolute' as const,
              top: r * gap + paddingTop,
              left: c * gap + paddingX,
              transform: isMobile ? 'scale(0.25)' : 'scale(1)',
              transformOrigin: 'top left',
            }}
          >
            <Pattern />
          </div>
        );
      }
    }

    setPatterns(generatedPatterns);
  }, []);

  return (
    <div className="fixed inset-0 w-screen h-screen z-[-1] pointer-events-none">
      {patterns}
    </div>
  );
}